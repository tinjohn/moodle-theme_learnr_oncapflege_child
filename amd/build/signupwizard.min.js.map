{"version":3,"file":"signupwizard.min.js","sources":["../src/signupwizard.js"],"sourcesContent":["import {eventTypes as formEventTypes} from 'core_form/events';\n\nexport const init = () => {\n\n    /**\n     * Function to add list entries based on event messages\n     * @param {any} message\n     * @returns {any}\n     */\n    function addListEntry(message) {\n        const listItem = document.createElement('li');\n        listItem.textContent = message;\n        errorSummaryUl.appendChild(listItem);\n    }\n    /**\n     * Function to remove all list entries based on event messages\n     * @returns {any}\n     */\n    function removeAllListEntries() {\n        const ul = document.querySelector('#formerrorssummary ul'); // Get a reference to the <ul> element\n        // Remove all <li> elements from the <ul>\n        while (ul.firstChild) {\n            ul.removeChild(ul.firstChild);\n        }\n    }\n\n    /**\n     * Description\n     * @param {any} e\n     * @returns {any}\n     */\n    function fieldValidationFailedListener(e) {\n        const message = e.detail.message;\n        if (message != \"\") {\n            addListEntry(message);\n            const errorSummary = document.querySelector('#formerrorssummary');\n            errorSummary.classList.remove('hidden');\n        }\n    }\n\n    // Create the pagination div and its contents\n    const paginationHTML = `\n    <div class=\"pagination\">\n    <a class=\"btn hidden\" id=\"prev\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"></i></a>\n    <a class=\"btn \" id=\"next\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"></i>    </a>\n    </div>\n    `;\n\n    // Get a reference to the first form element in the document\n    const form = document.querySelector('form');\n    const signup = document.querySelector('div.signupform');\n    // Append the pagination HTML to the form\n    signup.insertAdjacentHTML('beforeend', paginationHTML);\n    const errorSummaryUl = document.querySelector('#formerrorssummary ul');\n\n    const submitButton = document.querySelector('input[type=\"submit\"]');\n    submitButton.addEventListener('click', () => {\n         // Remove the event listener\n        form.removeEventListener(formEventTypes.formFieldValidationFailed, fieldValidationFailedListener);\n        const errorSummary = document.querySelector('#formerrorssummary');\n        errorSummary.classList.add('hidden');\n        removeAllListEntries();\n        form.addEventListener(formEventTypes.formFieldValidationFailed, fieldValidationFailedListener);\n    });\n\n\n    // Add the event listener\n//    form.addEventListener(formEventTypes.formFieldValidationFailed, fieldValidationFailedListener);\n\n    // form.addEventListener(formEventTypes.formFieldValidationFailed, e => {\n    //     const message = e.detail.message;\n    //     if(message != \"\") {\n    //         addListEntry(message);\n    //     }\n    //     const errorSummary = document.querySelector('#formerrorssummary');\n    //     errorSummary.classList.remove('hidden');\n    // });\n\n    const previousButton = document.querySelector('#prev');\n    const nextButton = document.querySelector('#next');\n    //const submitButton = document.querySelector('#submit');\n    const tabPanels1 = form.querySelectorAll('form > div.form-group');\n    const tabPanels2 = form.querySelectorAll('form > fieldset');\n    const tabPanels = Array.from(tabPanels1).concat(Array.from(tabPanels2));\n\n    const isEmpty = (str) => !str.trim().length;\n    let currentStep = 0;\n    const steps = [4, 8, 10, tabPanels.length - 1];\n\n    // Create the tab status HTML\n    var tabStatusHTML = `\n    <div class=\"tab-status\">\n        <span class=\"tab active\">1</span>\n    `;\n    for(var sc = 2; sc < steps.length; sc++) {\n    tabStatusHTML += `\n        <span class=\"tab\">` + sc + `</span>\n    `;\n    }\n    // Create the tab status HTML\n    tabStatusHTML += `\n    <span class=\"helppix\"></span>\n    </div>\n    `;\n    // Append the pagination HTML to the form\n    signup.insertAdjacentHTML('beforebegin', tabStatusHTML);\n\n    const tabTargets = document.querySelectorAll('.tab');\n\n    for(var i=steps[currentStep]+1; i< tabPanels.length; i++) {\n        tabPanels[i].classList.add('hidden');\n    }\n\n    // Next: Change UI relative to the current step and account for button permissions\n    nextButton.addEventListener('click', (event) => {\n        // Prevent default on links\n        event.preventDefault();\n        // Hide current tab\n        for(var i = 0 ; i <= steps[currentStep]; i++) {\n            tabPanels[i].classList.add('hidden');\n        }\n        tabTargets[currentStep].classList.remove('active');\n        // Show next tab\n        for(i=steps[currentStep]+1; i <= steps[currentStep + 1]; i++) {\n            tabPanels[i].classList.remove('hidden');\n        }\n        currentStep += 1;\n        tabTargets[currentStep].classList.add('active');\n        //validateEntry();\n        updateStatusDisplay();\n    });\n\n    // Previous: Change UI relative to current step and account for button permissions\n    previousButton.addEventListener('click', (event) => {\n        event.preventDefault();\n        // Hide current tab\n        for(var i = 0; i < tabPanels.length; i++) {\n            tabPanels[i].classList.add('hidden');\n        }\n        tabTargets[currentStep].classList.remove('active');\n        // Show previous tab\n        if (currentStep < 2) {\n            var start = -1;\n        }  else {\n            var start = steps[currentStep - 2];\n        }\n        for(i = start + 1; i <= steps[currentStep -1]; i++) {\n            tabPanels[i].classList.remove('hidden');\n        }\n        tabTargets[currentStep - 1].classList.add('active');\n        currentStep -= 1;\n        nextButton.removeAttribute('disabled');\n        updateStatusDisplay();\n    });\n\n    /**\n     * updateStatusDisplay\n     * @returns {any}\n     */\n    function updateStatusDisplay() {\n        // If on the last step, hide the next button and show submit\n        if (currentStep === tabTargets.length - 1) {\n            nextButton.classList.add('hidden');\n            previousButton.classList.remove('hidden');\n            //submitButton.classList.remove('hidden');\n            validateEntry();\n            // If it's the first step hide the previous button\n        } else if (currentStep == 0) {\n            nextButton.classList.remove('hidden');\n            previousButton.classList.add('hidden');\n            //submitButton.classList.add('hidden');\n            // In all other instances display both buttons\n        } else {\n            nextButton.classList.remove('hidden');\n            previousButton.classList.remove('hidden');\n            //submitButton.classList.add('hidden');\n        }\n    }\n\n\n    /**\n     * Description\n     * @returns {any}\n     */\n    function validateEntry() {\n        let input = tabPanels[currentStep].querySelector('input');\n        // Start but disabling continue button\n        nextButton.setAttribute('disabled', true);\n        //submitButton.setAttribute('disabled', true);\n        // Validate on initial function fire\n        setButtonPermissions(input);\n        // Validate on input\n        input.addEventListener('input', () => setButtonPermissions(input));\n        // Validate if bluring from input\n        input.addEventListener('blur', () => setButtonPermissions(input));\n    }\n\n    /**\n     * Description\n     * @param {any} input\n     * @returns {any}\n     */\n    function setButtonPermissions(input) {\n        if (isEmpty(input.value)) {\n            nextButton.setAttribute('disabled', true);\n            //submitButton.setAttribute('disabled', true);\n        } else {\n            nextButton.removeAttribute('disabled');\n            //submitButton.removeAttribute('disabled');\n        }\n    }\n};"],"names":["fieldValidationFailedListener","e","message","detail","listItem","document","createElement","textContent","errorSummaryUl","appendChild","addListEntry","querySelector","classList","remove","form","signup","insertAdjacentHTML","addEventListener","removeEventListener","formEventTypes","formFieldValidationFailed","add","ul","firstChild","removeChild","removeAllListEntries","previousButton","nextButton","tabPanels1","querySelectorAll","tabPanels2","tabPanels","Array","from","concat","currentStep","steps","length","tabStatusHTML","sc","tabTargets","i","updateStatusDisplay","input","setAttribute","setButtonPermissions","validateEntry","value","trim","removeAttribute","event","preventDefault","start"],"mappings":"6LAEoB,cA6BPA,8BAA8BC,SAC7BC,QAAUD,EAAEE,OAAOD,WACV,IAAXA,QAAe,WAxBDA,eACZE,SAAWC,SAASC,cAAc,MACxCF,SAASG,YAAcL,QACvBM,eAAeC,YAAYL,UAsBvBM,CAAaR,SACQG,SAASM,cAAc,sBAC/BC,UAAUC,OAAO,iBAahCC,KAAOT,SAASM,cAAc,QAC9BI,OAASV,SAASM,cAAc,kBAEtCI,OAAOC,mBAAmB,iRACpBR,eAAiBH,SAASM,cAAc,yBAEzBN,SAASM,cAAc,wBAC/BM,iBAAiB,SAAS,KAEnCH,KAAKI,oBAAoBC,mBAAeC,0BAA2BpB,+BAC9CK,SAASM,cAAc,sBAC/BC,UAAUS,IAAI,2BAzCrBC,GAAKjB,SAASM,cAAc,8BAE3BW,GAAGC,YACND,GAAGE,YAAYF,GAAGC,YAuCtBE,GACAX,KAAKG,iBAAiBE,mBAAeC,0BAA2BpB,wCAgB9D0B,eAAiBrB,SAASM,cAAc,SACxCgB,WAAatB,SAASM,cAAc,SAEpCiB,WAAad,KAAKe,iBAAiB,yBACnCC,WAAahB,KAAKe,iBAAiB,mBACnCE,UAAYC,MAAMC,KAAKL,YAAYM,OAAOF,MAAMC,KAAKH,iBAGvDK,YAAc,QACZC,MAAQ,CAAC,EAAG,EAAG,GAAIL,UAAUM,OAAS,WAGxCC,gGAIIC,GAAK,EAAGA,GAAKH,MAAMC,OAAQE,KACnCD,eAAiB,+BACSC,mBAI1BD,uEAKAvB,OAAOC,mBAAmB,cAAesB,qBAEnCE,WAAanC,SAASwB,iBAAiB,YAEzC,IAAIY,EAAEL,MAAMD,aAAa,EAAGM,EAAGV,UAAUM,OAAQI,IACjDV,UAAUU,GAAG7B,UAAUS,IAAI,mBAiDtBqB,sBAEDP,cAAgBK,WAAWH,OAAS,GACpCV,WAAWf,UAAUS,IAAI,UACzBK,eAAed,UAAUC,OAAO,yBAsBhC8B,MAAQZ,UAAUI,aAAaxB,cAAc,SAEjDgB,WAAWiB,aAAa,YAAY,GAGpCC,qBAAqBF,OAErBA,MAAM1B,iBAAiB,SAAS,IAAM4B,qBAAqBF,SAE3DA,MAAM1B,iBAAiB,QAAQ,IAAM4B,qBAAqBF,SA7BtDG,IAEsB,GAAfX,aACPR,WAAWf,UAAUC,OAAO,UAC5Ba,eAAed,UAAUS,IAAI,YAI7BM,WAAWf,UAAUC,OAAO,UAC5Ba,eAAed,UAAUC,OAAO,oBA4B/BgC,qBAAqBF,OACdA,MAAMI,MAtHQC,OAAOX,OA0H7BV,WAAWsB,gBAAgB,YAH3BtB,WAAWiB,aAAa,YAAY,GA1F5CjB,WAAWV,iBAAiB,SAAUiC,QAElCA,MAAMC,qBAEF,IAAIV,EAAI,EAAIA,GAAKL,MAAMD,aAAcM,IACrCV,UAAUU,GAAG7B,UAAUS,IAAI,cAE/BmB,WAAWL,aAAavB,UAAUC,OAAO,UAErC4B,EAAEL,MAAMD,aAAa,EAAGM,GAAKL,MAAMD,YAAc,GAAIM,IACrDV,UAAUU,GAAG7B,UAAUC,OAAO,UAElCsB,aAAe,EACfK,WAAWL,aAAavB,UAAUS,IAAI,UAEtCqB,yBAIJhB,eAAeT,iBAAiB,SAAUiC,QACtCA,MAAMC,qBAEF,IAAIV,EAAI,EAAGA,EAAIV,UAAUM,OAAQI,IACjCV,UAAUU,GAAG7B,UAAUS,IAAI,aAE/BmB,WAAWL,aAAavB,UAAUC,OAAO,UAErCsB,YAAc,MACViB,OAAS,OAETA,MAAQhB,MAAMD,YAAc,OAEhCM,EAAIW,MAAQ,EAAGX,GAAKL,MAAMD,YAAa,GAAIM,IAC3CV,UAAUU,GAAG7B,UAAUC,OAAO,UAElC2B,WAAWL,YAAc,GAAGvB,UAAUS,IAAI,UAC1Cc,aAAe,EACfR,WAAWsB,gBAAgB,YAC3BP"}